// common/types/exchange.proto
syntax = "proto3";

package exchange;

option go_package = "exchange/common/types";


// 订单方向
enum OrderSide {
  BUY = 0;
  SELL = 1;
}

// 订单类型
enum OrderType {
  LIMIT = 0;
  MARKET = 1;
  STOP_LIMIT = 2;
  STOP_MARKET = 3;
}

// 订单状态
enum OrderStatus {
  PENDING = 0;
  ACTIVE = 1;
  PARTIALLY_FILLED = 2;
  FILLED = 3;
  CANCELLED = 4;
  REJECTED = 5;
}

// 订单
message Order {
  string order_id = 1;
  string user_id = 2;
  string symbol = 3;
  OrderSide side = 4;
  OrderType type = 5;
  string price = 6;  // 使用字符串避免浮点数精度问题
  string amount = 7;
  string filled_amount = 8;
  OrderStatus status = 9;
  int64 create_time = 10;
  int64 update_time = 11;
  string client_order_id = 12;
}

// 成交记录
message Trade {
  string trade_id = 1;
  string symbol = 2;
  string buy_order_id = 3;
  string sell_order_id = 4;
  string price = 5;
  string amount = 6;
  string fee = 7;
  int64 trade_time = 8;
}

// 账户余额
message Balance {
  string available = 1;
  string locked = 2;
  string total = 3;
}

// 订单簿深度
message OrderBook {
  message OrderLevel {
    string price = 1;
    string amount = 2;
  }
  repeated OrderLevel bids = 1;
  repeated OrderLevel asks = 2;
  int64 timestamp = 3;
}